<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Referral Race</title>
<style>
  :root{
    --bg:#0c0c12; --ink:#eef2ff; --muted:#a0a7c9;
    --panel:#141424; --panel2:#191932; --edge:rgba(255,255,255,.08);
    --p1:#8b5dff; --p2:#aa74ff; --glow:rgba(153,120,255,.3);
    --acc:#ffd86a; --good:#4be1a0;
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%;background:radial-gradient(1000px 700px at 50% -10%, #1b1c3f 0%, transparent 60%), linear-gradient(180deg,#0b0c1a,#070813);color:var(--ink);font:15px/1.5 Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;-webkit-tap-highlight-color:transparent}
  .app{max-width:520px;margin:0 auto;min-height:100dvh;display:grid;grid-template-rows:auto 1fr auto}
  /* Header */
  header{position:sticky;top:0;background:linear-gradient(180deg,#10112a,#0d0e23);border-bottom:1px solid var(--edge);padding:12px 16px;z-index:20}
  .hrow{display:flex;align-items:center;justify-content:space-between}
  .title{font-weight:900;font-size:18px;letter-spacing:.4px}
  .seg{margin-top:10px;background:#14143a;border:1px solid var(--edge);padding:4px;border-radius:999px;display:none;gap:4px}
  .seg button{appearance:none;border:0;background:transparent;color:var(--muted);padding:8px 12px;border-radius:999px;font-weight:800;cursor:pointer}
  .seg button.active{background:linear-gradient(180deg,var(--p2),var(--p1));color:#fff;box-shadow:0 2px 10px var(--glow)}

  /* Content */
  main{padding:14px 14px 96px}
  .card{background:linear-gradient(180deg,#151533,#10112a);border:1px solid var(--edge);border-radius:16px;padding:14px}
  .card + .card{margin-top:12px}
  h2{margin:0 0 8px;font-size:18px}
  h3{margin:0 0 8px;font-size:16px}
  p{margin:0 0 8px;color:#dfe5ff}

  /* Ranks */
  .podiumWrap{position:relative;border-radius:22px;background:linear-gradient(180deg,#d7c9ff,#b59bff);border:1px solid rgba(255,255,255,.55);box-shadow:0 30px 80px rgba(0,0,0,.45);overflow:hidden}
  .cap{position:absolute;top:8px;left:0;right:0;text-align:center;color:#2b135f;font-size:11px;font-weight:900;letter-spacing:.4px}
  .podium{display:grid;grid-template-columns:1fr 1.2fr 1fr;gap:8px;align-items:end;padding:56px 10px 10px}
  .step{position:relative;border-radius:14px;background:linear-gradient(180deg,#efe7ff,#d4c6ff);border:1px solid rgba(80,40,140,.28);box-shadow:inset 0 -12px 18px rgba(80,40,140,.18),0 8px 18px rgba(0,0,0,.15);padding:8px 6px 10px;display:grid;place-items:center}
  .s1{height:96px}.s2{height:78px}.s3{height:74px}
  .rankDot{position:absolute;top:-18px;left:50%;transform:translateX(-50%);width:52px;height:52px;border-radius:50%;display:grid;place-items:center;font-weight:900;color:#2b135f;background:radial-gradient(circle at 35% 30%, #fff 0%, #ffe5a6 50%, #ffc44d 70%);border:2px solid rgba(0,0,0,.08);box-shadow:0 6px 14px rgba(0,0,0,.25)}
  .crown{position:absolute;top:-42px;left:50%;transform:translateX(-50%);width:34px;height:34px;background:radial-gradient(circle at 35% 30%, #fff 0%, #ffe5a6 48%, #ffc44d 62%);border-radius:8px;box-shadow:0 6px 14px rgba(0,0,0,.2)}
  .avatar{position:absolute;top:-56px;left:50%;transform:translateX(-50%);width:68px;height:68px;border-radius:50%;border:3px solid #fff;box-shadow:0 8px 20px rgba(0,0,0,.35);background:#fff center/cover no-repeat}
  .name{margin-top:14px;font-weight:900;color:#2b135f;font-size:12px;max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .scoreMini{color:#55308f;font-size:11px;margin-top:2px}

  .search{display:grid;grid-template-columns:1fr auto;gap:8px}
  .input{border-radius:12px;border:1px solid var(--edge);background:#0f1030;color:#eff3ff;padding:10px 12px}
  .btn{appearance:none;border:0;border-radius:12px;background:linear-gradient(180deg,var(--p2),var(--p1));color:#fff;font-weight:900;padding:10px 12px;cursor:pointer}
  .table{border:1px solid var(--edge);border-radius:16px;overflow:hidden;margin-top:10px}
  .th,.tr{display:grid;grid-template-columns:60px 1fr 110px;gap:8px;align-items:center}
  .th{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));padding:8px 10px;color:#dfe6ff;font-weight:800}
  .tr{background:linear-gradient(180deg,#0f1133,#0c1030);border-top:1px solid #0a0e28;padding:8px 10px}
  .rk{display:inline-flex;align-items:center;justify-content:center;width:46px;height:46px;border-radius:50%;font-weight:900;background:radial-gradient(circle at 35% 30%, #fff, #ffe5a6 55%, #ffc44d 70%);color:#3a2a00;border:2px solid rgba(0,0,0,.06)}
  .rk.silver{background:radial-gradient(circle at 35% 30%, #fff, #eef3ff 55%, #d7e5ff 70%);color:#243152}
  .rk.bronze{background:radial-gradient(circle at 35% 30%, #fff, #ffd8b3 55%, #e7a86f 70%);color:#4a2c12}
  .user{display:flex;align-items:center;gap:10px}
  .face{width:38px;height:38px;border-radius:50%;background:#eee center/cover no-repeat;border:2px solid #fff22}
  .points{justify-self:end;font-weight:900}
  .me{outline:2px solid var(--good);box-shadow:0 0 0 4px rgba(75,225,160,.18)}

  /* Bottom tabs */
  nav{position:sticky;bottom:0;background:linear-gradient(180deg,#10112a,#0b0c1f);border-top:1px solid var(--edge);padding:8px 10px;z-index:30}
  .tabs{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
  .tab{appearance:none;border:1px solid var(--edge);background:#14143a;color:#cdd7ff;border-radius:12px;padding:10px 8px;font-weight:800;cursor:pointer}
  .tab.active{background:linear-gradient(180deg,var(--p2),var(--p1));color:#fff;box-shadow:0 6px 18px var(--glow)}

  /* FAQ */
  details{background:#14143a;border:1px solid var(--edge);border-radius:12px;padding:10px}
  details+details{margin-top:8px}
  summary{cursor:pointer;font-weight:800}

  /* Share */
  .shareRow{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .shareBtn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px;border-radius:12px;border:1px solid var(--edge);background:#14143a;color:#eaf0ff;font-weight:800;cursor:pointer}
  .icons{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:10px}
  .social{display:grid;place-items:center;border:1px solid var(--edge);background:#14143a;padding:12px;border-radius:12px}
  .social svg{width:22px;height:22px}

  /* === Community Social List === */
.socialCard{
  background: radial-gradient(120% 140% at 0% 0%, #5d2fff 0%, #4c22d8 35%, #3b1dbb 70%);
  border: 1px solid rgba(255,255,255,.18);
  border-radius: 20px;
  padding: 12px;
  box-shadow: 0 20px 50px rgba(0,0,0,.35);
}
.socialItem{
  display:grid; grid-template-columns:1fr auto; align-items:center;
  background: rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.16);
  border-radius:14px; padding:10px 12px;
}
.socialItem + .socialItem{ margin-top:10px }
.sLeft{ display:flex; align-items:center; gap:10px; min-width:0 }
.sIcon{
  width:34px; height:34px; border-radius:10px; display:grid; place-items:center;
  background:#fff; color:#111; box-shadow:0 6px 14px rgba(0,0,0,.18); overflow:hidden
}
.sName{ font-weight:800; letter-spacing:.2px }
.subBtn{
  appearance:none; border:0; padding:9px 14px; border-radius:10px;
  background:#fff; color:#222; font-weight:900; cursor:pointer;
  box-shadow: 0 4px 0 rgba(0,0,0,.12);
}
.subBtn:active{ transform:translateY(1px); box-shadow:0 2px 0 rgba(0,0,0,.12) }

</style>
</head>
<body>
<div class="app">
  <header>
    <div class="hrow">
      <div class="title" id="hdrTitle">Referral Race</div>
      <div class="muted" style="font-size:12px">v1 • demo</div>
    </div>
    <div id="rangeSeg" class="seg">
      <button type="button" data-range="daily"   class="active">Daily</button>
      <button type="button" data-range="monthly">Monthly</button>
      <button type="button" data-range="all">All time</button>
    </div>
  </header>

  <main id="view"><!-- content injected here --></main>

  <nav>
    <div class="tabs">
      <button type="button" class="tab active" data-tab="home">Home</button>
      <button type="button" class="tab" data-tab="ranks">Ranks</button>
      <button type="button" class="tab" data-tab="terms">T&amp;C</button>
      <button type="button" class="tab" data-tab="community">Community</button>
    </div>
  </nav>
</div>

<script>
(function(){
  /* --- Sample data --- */
  var DAILY = [
    {username:'Masuma',        score:1490, avatar:''},
    {username:'Hasan Sajjad',  score:1800, avatar:''},
    {username:'Tanim',         score:1205, avatar:''},
    {username:'Sadia Afrin',   score:1000, avatar:''},
    {username:'Rejaul karim',  score:900,  avatar:''},
    {username:'Hasnat',        score:800,  avatar:''},
    {username:'Nishat jahan',  score:750,  avatar:''},
    {username:'Sajjad (YOU)',  score:720,  avatar:''}
  ];
  var MONTHLY = DAILY.map(function(x,i){ return {username:x.username, score:Math.round(x.score*3.2 - i*20), avatar:x.avatar}; });
  var ALL     = DAILY.map(function(x,i){ return {username:x.username, score:Math.round(x.score*7.1 - i*50), avatar:x.avatar}; });

  /* --- helpers --- */
  function $(s,el){ return (el||document).querySelector(s); }
  function $all(s,el){ return Array.prototype.slice.call((el||document).querySelectorAll(s)); }
  function fmt(n){ return Number(n||0).toLocaleString(); }
  function esc(s){ return String(s==null?'':s).replace(/[&<>"']/g,function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]; }); }
  function faceBg(url){ return url ? 'url("'+url+'")' : 'url("data:image/svg+xml;utf8,'+encodeURIComponent(svgAvatar())+'")'; }
  function svgAvatar(){return "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0%' stop-color='%23ffdef2'/><stop offset='100%' stop-color='%238b5dff'/></linearGradient></defs><rect width='64' height='64' rx='16' fill='url(%23g)'/><circle cx='32' cy='26' r='12' fill='white' opacity='.9'/><rect x='14' y='40' width='36' height='16' rx='8' fill='white' opacity='.9'/></svg>"; }

  /* --- state --- */
  var state = { tab:'home', range:'daily', sets:{daily:DAILY, monthly:MONTHLY, all:ALL} };

  /* --- renderers --- */
  function render(){
    $('#hdrTitle').textContent = state.tab==='ranks' ? 'Leaderboard' :
                                 state.tab==='terms' ? 'Terms & FAQ' :
                                 state.tab==='community' ? 'Community' : 'Referral Race';
    $('#rangeSeg').style.display = state.tab==='ranks' ? 'inline-flex' : 'none';
    $all('.tab').forEach(function(b){ b.classList.toggle('active', b.getAttribute('data-tab')===state.tab); });
    $all('#rangeSeg button').forEach(function(b){ b.classList.toggle('active', b.getAttribute('data-range')===state.range); });

    if(state.tab==='home')      renderHome();
    else if(state.tab==='ranks')renderRanks();
    else if(state.tab==='terms')renderTerms();
    else                        renderCommunity();
  }

  function renderHome(){
    $('#view').innerHTML =
      '<div class="card">'+
        '<h2>Referral Race</h2>'+
        '<p>Invite friends, climb the leaderboard, and win weekly rewards.</p>'+
        '<p><b>How it works</b></p>'+
        '<ul style="margin:6px 0 0 18px;color:#dfe5ff">'+
          '<li>Share your referral link with friends.</li>'+
          '<li>Every verified signup = <b>+1 point</b>.</li>'+
          '<li>Daily podium (1–3) and Top list reset at midnight.</li>'+
          '<li>Monthly champions win bigger prizes.</li>'+
        '</ul>'+
      '</div>'+
      '<div class="card">'+
        '<h3>Today’s Boosts</h3>'+
        '<p>🎉 +2 points for first 5 referrals today.</p>'+
        '<p>⏰ Streak bonus: 5 days in a row = extra 15 points.</p>'+
      '</div>';
  }

  function renderRanks(){
    var items = state.sets[state.range].slice().sort(function(a,b){ return b.score-a.score; });
    var first  = items[0] || null;
    var second = items[1] || null;
    var third  = items[2] || null;

    $('#view').innerHTML =
      '<div class="podiumWrap">'+
        '<div class="cap">'+(state.range.charAt(0).toUpperCase()+state.range.slice(1))+' Podium</div>'+
        '<div class="podium">'+
          '<div class="step s2"><div class="rankDot">2</div><div class="avatar" id="p2a"></div><div class="name" id="p2n">—</div><div class="scoreMini" id="p2s"></div></div>'+
          '<div class="step s1"><div class="crown"></div><div class="rankDot">1</div><div class="avatar" id="p1a"></div><div class="name" id="p1n">—</div><div class="scoreMini" id="p1s"></div></div>'+
          '<div class="step s3"><div class="rankDot">3</div><div class="avatar" id="p3a"></div><div class="name" id="p3n">—</div><div class="scoreMini" id="p3s"></div></div>'+
        '</div>'+
      '</div>'+
      '<div class="card" style="margin-top:12px">'+
        '<div class="search">'+
          '<input id="searchName" class="input" placeholder="Search username…"/>'+
          '<button type="button" class="btn" id="findBtn">Find</button>'+
        '</div>'+
        '<div class="table" style="margin-top:10px">'+
          '<div class="th"><div>Rank</div><div>Player</div><div>Points</div></div>'+
          '<div id="tbody"></div>'+
        '</div>'+
        '<div id="meSpot" class="card" style="display:none;margin-top:10px;background:#0f1d3a">'+
          '<div id="meText" class="muted">Your position</div>'+
        '</div>'+
      '</div>';

    function setPodium(id,row){
      $('#'+id+'a').style.backgroundImage = faceBg(row && row.avatar ? row.avatar : '');
      $('#'+id+'n').textContent = row && row.username ? row.username : '—';
      $('#'+id+'s').textContent = row ? fmt(row.score)+' points' : '';
    }
    setPodium('p1',first); setPodium('p2',second); setPodium('p3',third);

    var body = $('#tbody'); body.innerHTML='';
    items.forEach(function(r,i){
      var place=i+1, cls=(place===2?'silver':(place===3?'bronze':'')), label=(place<=3?(place===1?'1st':place===2?'2nd':'3rd'):place);
      var tr=document.createElement('div'); tr.className='tr'; tr.setAttribute('data-user', r.username.toLowerCase());
      tr.innerHTML = '<div class="rk '+cls+'">'+label+'</div>'+
        '<div class="user"><div class="face" style="background-image:'+faceBg(r.avatar)+'"></div><div>'+esc(r.username)+'</div></div>'+
        '<div class="points">'+fmt(r.score)+' pts</div>';
      body.appendChild(tr);
    });

    $('#findBtn').onclick = function(){
      var val = ($('#searchName').value||'').trim().toLowerCase();
      if(!val) return;
      var idx = -1;
      for(var j=0;j<items.length;j++){ if(items[j].username.toLowerCase()===val){ idx=j; break; } }
      if(idx<0){ $('#meText').textContent='No match found.'; $('#meSpot').style.display='block'; return; }
      var row = items[idx], place = idx+1;
      $('#meText').innerHTML = '<b>'+esc(row.username)+'</b> — Rank <b>'+place+'</b> • '+fmt(row.score)+' points';
      $('#meSpot').style.display='block';
      var hit = $('.tr[data-user="'+val+'"]'); if(hit){ hit.classList.add('me'); hit.scrollIntoView({behavior:'smooth',block:'center'}); setTimeout(function(){ hit.classList.remove('me'); },1600); }
    };
  }

  function renderTerms(){
    $('#view').innerHTML =
      '<div class="card"><h2>Terms & Conditions</h2><p>By joining the Referral Race, you agree to the rules below.</p></div>'+
      '<div class="card"><h3>FAQ</h3>'+
        '<details open><summary>How do I earn points?</summary><p>Each verified signup via your link grants <b>+1 point</b>. Bonus events may add extra points.</p></details>'+
        '<details><summary>When are winners announced?</summary><p>Daily winners after midnight; monthly champions on the 1st of each month.</p></details>'+
        '<details><summary>How do payouts work?</summary><p>Rewards are credited within 24 hours (daily) and 3 days (monthly).</p></details>'+
        '<details><summary>What about fake signups?</summary><p>Anti-fraud checks remove invalid referrals; repeat abuse may lead to disqualification.</p></details>'+
        '<details><summary>Can I change my username?</summary><p>Yes in your profile; ranking history remains attached to your account.</p></details>'+
      '</div>';
  }

 function renderCommunity(){
  // Configure your links here
  var socials = [
    {name:'Facebook',  url:'https://facebook.com/yourbrand',  icon:'facebook'},
    {name:'Instagram', url:'https://instagram.com/yourbrand', icon:'instagram'},
    {name:'Pinterest', url:'https://pinterest.com/yourbrand', icon:'pinterest'},
    {name:'Telegram',  url:'https://t.me/yourchannel',        icon:'telegram'},
    {name:'Threads',   url:'https://www.threads.net/@yourid', icon:'threads'},
    {name:'Whatsapp',  url:'https://wa.me/message/XXXXXXXX',  icon:'whatsapp'},
    {name:'X',         url:'https://twitter.com/yourbrand',   icon:'x'},
    {name:'Youtube',   url:'https://youtube.com/@yourbrand',  icon:'youtube'}
  ];

  // tiny SVG icon helper (all inline, no external assets)
  function iconSVG(key){
    var s = {
      facebook:'<svg viewBox="0 0 24 24"><path fill="#1877F2" d="M24 12.07C24 5.405 18.627 0 12 0S0 5.405 0 12.07C0 18.1 4.388 23.093 10.125 24v-8.44H7.078v-3.49h3.047V9.413c0-3.017 1.792-4.687 4.533-4.687 1.313 0 2.686.235 2.686.235v2.97h-1.514c-1.492 0-1.956.929-1.956 1.884v2.26h3.328l-.532 3.49h-2.796V24C19.612 23.093 24 18.1 24 12.07z"/></svg>',
      instagram:'<svg viewBox="0 0 24 24"><defs><linearGradient id="ig" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#feda75"/><stop offset="50%" stop-color="#d62976"/><stop offset="100%" stop-color="#4f5bd5"/></linearGradient></defs><rect x="2" y="2" width="20" height="20" rx="5" fill="url(#ig)"/><circle cx="12" cy="12" r="4.5" fill="#fff"/><circle cx="17.2" cy="6.8" r="1.3" fill="#fff"/></svg>',
      pinterest:'<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="11" fill="#E60023"/><path fill="#fff" d="M12.24 7.5c-2.67 0-4.01 1.92-4.01 3.52 0 .97.37 1.82 1.16 2.14.13.05.24 0 .28-.14.02-.1.09-.37.12-.48.04-.14.02-.19-.08-.31-.23-.27-.38-.62-.38-1.12 0-1.44 1.08-2.73 2.82-2.73 1.54 0 2.39.94 2.39 2.2 0 1.65-.73 3.05-1.82 3.05-.6 0-1.05-.5-.9-1.12.17-.71.5-1.48.5-1.99 0-.46-.25-.85-.78-.85-.62 0-1.11.63-1.11 1.48 0 .54.18.9.18.9s-.6 2.52-.7 2.96c-.21.9-.03 2 .03 2.1.02.03.03.03.05.02.02 0 .77-1 .99-1.93.07-.29.39-1.54.39-1.54.19.36.76.68 1.36.68 1.79 0 3.01-1.64 3.01-3.84 0-1.66-1.41-3.2-3.54-3.2z"/></svg>',
      telegram:'<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="11" fill="#27A7E7"/><path fill="#fff" d="M9.7 17.3l.3-3.2 7.3-6.6c.3-.3-.1-.4-.5-.2l-9 5.7-3.1-1c-.7-.2-.7-.7.1-1l12.1-4.7c.6-.2 1.1.1.9 1l-2.1 10.6c-.1.7-.5.9-1.1.6l-3-2.2-2 1.9c-.1.2-.5.1-.7 0z"/></svg>',
      threads:'<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="11" fill="#000"/><path fill="#fff" d="M16.9 11.8c-.2-2.5-1.8-4.1-4.5-4.1-1.8 0-3.1.7-3.8 2l2 .9c.3-.7.8-1 1.7-1 1.3 0 2 .7 2.1 1.9-1-.3-2.1-.4-3.2-.1-2 .6-2.6 2.2-2.2 3.5.4 1.4 1.9 2.3 3.7 2.3 1.3 0 2.4-.4 3.1-1.1.1.4.3.8.6 1.2l1.7-1.2c-.5-.7-.9-1.5-1-.2 0-.7 0-1.3-.2-2zM12.2 15c-.9 0-1.5-.4-1.7-1-.2-.7.3-1.3 1.2-1.6.8-.2 1.7-.2 2.6 0-.1 1.3-1 2.6-2.1 2.6z"/></svg>',
      whatsapp:'<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="11" fill="#25D366"/><path fill="#fff" d="M17.8 13.35c-.18-.1-1.08-.58-1.25-.64-.17-.06-.3-.1-.43.1-.13.2-.49.64-.6.77-.11.13-.22.15-.4.05-.18-.1-.77-.31-1.46-.9-.54-.48-.9-1.08-1.01-1.26-.11-.18-.01-.28.08-.37.08-.08.18-.2.27-.29.09-.1.12-.17.18-.28.06-.12.03-.21-.02-.3-.05-.09-.43-.92-.59-1.26-.15-.33-.31-.28-.43-.28h-.37c-.13 0-.32.05-.49.23-.17.18-.65.63-.65 1.52s.67 1.76.77 1.88c.1.12 1.33 1.98 3.22 2.78.45.19.8.3 1.08.39.45.14.86.12 1.19.08.36-.05 1.11-.44 1.27-.86.16-.42.16-.78.11-.86-.05-.08-.18-.12-.36-.21z"/></svg>',
      x:'<svg viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="5" fill="#000"/><path fill="#fff" d="M6 6l6.3 8.3L10 18h2.1l1.5-2.2L18 18h2l-6.7-8.7L16 6h-2l-1.3 2-1 1.5L9 6H6z"/></svg>',
      youtube:'<svg viewBox="0 0 24 24"><rect x="2" y="5" width="20" height="14" rx="4" fill="#FF0000"/><path fill="#fff" d="M10 9l6 3-6 3z"/></svg>'
    };
    return s[key] || s['x'];
  }

  // Build the list
  var rows = socials.map(function(s){
    return (
      '<div class="socialItem">' +
        '<div class="sLeft">' +
          '<div class="sIcon">'+ iconSVG(s.icon) +'</div>' +
          '<div class="sName">'+ s.name +'</div>' +
        '</div>' +
        '<a class="subBtn" href="'+ s.url +'" target="_blank" rel="noopener">Subscribe</a>' +
      '</div>'
    );
  }).join('');

  // Inject
  $('#view').innerHTML =
    '<div class="socialCard">' + rows + '</div>';
    var sharePayload = { title:title, text:title, url:url };
    $('#shareTelegram').onclick = function(){
      try{ if(navigator.share){ navigator.share(sharePayload); return; } }catch(e){}
      var tg='https://t.me/share/url?url='+encodeURIComponent(url)+'&text='+encodeURIComponent(title);
      window.open(tg,'_blank','noopener');
    };
    $('#shareWhatsApp').onclick = function(){
      var wa='https://wa.me/?text='+encodeURIComponent(title+' '+url);
      window.open(wa,'_blank','noopener');
    };
  }

  /* --- events --- */
  $all('.tab').forEach(function(btn){
    btn.addEventListener('click', function(){
      state.tab = btn.getAttribute('data-tab');
      render();
    });
  });
  $all('#rangeSeg button').forEach(function(btn){
    btn.addEventListener('click', function(){
      state.range = btn.getAttribute('data-range');
      render();
    });
  });

  /* --- boot --- */
  render();
})();
</script>
</body>
</html>
